<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>cinéMAJE</title>
    <link rel="stylesheet" href="css/styleMobile.css" />
    <link rel="stylesheet" href="css/styleDesktop.css" />
  </head>
  <body>
    <header>
      <a href="#nouveaute"><img id="logo" src="#" alt="logo" /></a>
      <nav>
        <ul id="navBarUl">
          <li id="navBarLi"><a href="#filmAffiche">Films à l'affiche</a></li>
          <li id="navBarLi"><a href="#tarifs">tarifs & Abonnements</a></li>
          <li id="navBarLi"><a href="#infos">Infos pratiques</a></li>
          <li id="navBarLi"><a href="#contact">Contact</a></li>
        </ul>
      </nav>
    </header>
    <main>
      <section id="nouveaute">
        <div class="carousel">
          <button class="carousel_button_left is-hidden">&lt;</button>
          <div class="carousel_track-container">
            <ul class="carousel_track">
              <li class="carousel_slide currentSlide">
                <img src="images/clandestin1.jpg" alt="" />
                <p class="text">
                  Clandestin, le chat métastasé à la tumeur incongrue d'origine
                  inconnue.
                </p>
              </li>
              <li class="carousel_slide">
                <img src="images/house-of-the-dead1.jpg" alt="" />
                <p class="text">
                  House of the dead, des morts sur l'île de la mort qui ne
                  veulent décidément pas mourir.
                </p>
              </li>
              <li class="carousel_slide">
                <img src="images/turkishSW1.jpg" alt="" />
                <p class="text">
                  Turkish Star Wars, la Guerre des étoiles au délicieux goût de
                  dürüm.
                </p>
              </li>
            </ul>
          </div>
          <button class="carousel_button_right">&gt;</button>
          <div class="carousel_nav">
            <button class="carousel_indicator current-slide"></button>
            <button class="carousel_indicator"></button>
            <button class="carousel_indicator"></button>
          </div>
        </div>
      </section>

      <!-- ----------------- section film à l'affiche ---------------- -->
      <section id="filmAffiche">
        <div>
          <a href="">
            <img src="" alt="affiche film1" />
            <p>Lorem, ipsum.</p>
          </a>
        </div>
        <div>
          <a href="">
            <img src="" alt="affiche film2" />
            <p>Lorem, ipsum.</p>
          </a>
        </div>
        <div>
          <a href="">
            <img src="" alt="affiche film3" />
            <p>Lorem, ipsum.</p>
          </a>
        </div>
        <div>
          <a href="">
            <img src="" alt="" />
            <p>Lorem, ipsum.</p>
          </a>
        </div>
        <a href=""><p>Voir tous les films à l'affiche</p></a>
      </section>
      <section id="tarifs">
        <img id="carte" src="" alt="carte" />
        <a href=""><p>Voir tous les tarifs et les abonnments disponibles</p></a>
      </section>
      <!-- ------------------------------- Infos Pratiques --------------------- -->
      <section id="infos">
        <h2>Infos Pratiques</h2>
        <div>
          <div>
            <!-- google map -->
            <iframe
              src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2829.1004581883267!2d-0.6030189844845336!3d44.83988747909855!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0xd5527f81b1731a1%3A0xd3ed05754af58f93!2s17%20Rue%20de%20la%20Libert%C3%A9%2C%2033200%20Bordeaux!5e0!3m2!1sfr!2sfr!4v1647264472336!5m2!1sfr!2sfr"
              style="border: 0"
              allowfullscreen=""
              loading="lazy"
            ></iframe>
          </div>
          <div>
            <h3>Adresse</h3>
            <p>CinémAJE</p>
            <p>17 Rue de la Liberté</p>
            <p>33200 Bordeaux</p>
            <h3>Horaires d'ouverture du cinéMAJ</h3>
            <p>Du lundi au vendredi : 08h30-12h30 & 14h00-17h00</p>
            <p>Le week-end sur demande du président uniquement</p>
          </div>
        </div>
      </section>
      <!-- ------------------------------- Formulaire --------------------- -->
      <section id="contact">
        <h2>Nous contacter</h2>
        <form id="contactForm">
          <div class="div1">
            <label for="name">Nom :</label>
            <input type="text" id="name" name="user_name" />
            <label for="email">e-mail:</label>
            <input type="email" id="email" name="user_email" />
          </div>
          <div class="div2">
            <label for="message">Votre message:</label>
            <textarea
              placeholder="Taper ici votre message"
              name="user_message"
              id="message"
              cols="30"
              rows="10"
            ></textarea>
          </div>
          <div class="div3">
            <button type="submit">Envoyer le message</button>
          </div>
        </form>
      </section>
    </main>
    <footer></footer>

    <!-- ----------------------------------- Javascript ------------------------------------------ -->

    <script>
      const track = document.querySelector(".carousel_track");
      const slides = Array.from(track.children);
      const nextButton = document.querySelector(".carousel_button_right");
      const prevButton = document.querySelector(".carousel_button_left");
      const dotsNav = document.querySelector(".carousel_nav");
      const dots = Array.from(dotsNav.children);
      const slideSize = slides[0].getBoundingClientRect();
      const slideWidth = slideSize.width;

      const setSlidePosition = (slide, index) => {
        slide.style.left = slideWidth * index + "px";
      };

      slides.forEach(setSlidePosition);

      const moveToSlide = (track, currentSlide, targetSlide) => {
        track.style.transform = "translateX(-" + targetSlide.style.left + ")";
        currentSlide.classList.remove("currentSlide");
        targetSlide.classList.add("currentSlide");
      };

      const updateDots = (currentDot, targetDot) => {
        currentDot.classList.remove("current-slide");
        targetDot.classList.add("current-slide");
      };

      const hideShowButtons = (slides, nextButton, prevButton, targetIndex) => {
        if (targetIndex === 0) {
          prevButton.classList.add("is-hidden");
          nextButton.classList.remove("is-hidden");
        } else if (targetIndex === slides.length - 1) {
          prevButton.classList.remove("is-hidden");
          nextButton.classList.add("is-hidden");
        } else {
          prevButton.classList.remove("is-hidden");
          nextButton.classList.remove("is-hidden");
        }
      };

      prevButton.addEventListener("click", () => {
        const currentSlide = track.querySelector(".currentSlide");
        const prevSlide = currentSlide.previousElementSibling;
        const currentDot = dotsNav.querySelector(".current-slide");
        const prevDot = currentDot.previousElementSibling;
        const prevIndex = slides.findIndex((slide) => slide === prevSlide);

        moveToSlide(track, currentSlide, prevSlide);
        updateDots(currentDot, prevDot);
        hideShowButtons(slides, nextButton, prevButton, prevIndex);
      });

      nextButton.addEventListener("click", () => {
        const currentSlide = track.querySelector(".currentSlide");
        const nextSlide = currentSlide.nextElementSibling;
        const currentDot = dotsNav.querySelector(".current-slide");
        const nextDot = currentDot.nextElementSibling;
        const nextIndex = slides.findIndex((slide) => slide === nextSlide);

        moveToSlide(track, currentSlide, nextSlide);
        updateDots(currentDot, nextDot);
        hideShowButtons(slides, nextButton, prevButton, nextIndex);
      });

      dotsNav.addEventListener("click", (event) => {
        const targetDot = event.target.closest("button");
        if (!targetDot) return;

        const currentSlide = track.querySelector(".currentSlide");
        const currentDot = dotsNav.querySelector(".current-slide");
        const targetIndex = dots.findIndex((dot) => dot === targetDot);
        const targetSlide = slides[targetIndex];

        moveToSlide(track, currentSlide, targetSlide);
        updateDots(currentDot, targetDot);
        hideShowButtons(slides, nextButton, prevButton, targetIndex);
      });
    </script>
  </body>
</html>
